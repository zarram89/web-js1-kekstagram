# План реализации: Генерация временных данных (module4-task1)

## Описание задачи

Необходимо создать функционал для генерации массива из 25 объектов, представляющих фотографии пользователей с комментариями. Эти данные будут использоваться для дальнейшей разработки интерфейса приложения Кекстаграм.

## Требования к данным

### Структура объекта фотографии:
- **id** (число): уникальный идентификатор от 1 до 25
- **url** (строка): адрес вида `photos/{{i}}.jpg`, где i от 1 до 25
- **description** (строка): произвольное описание фотографии
- **likes** (число): случайное от 15 до 200
- **comments** (массив): от 0 до 30 комментариев

### Структура объекта комментария:
- **id** (число): уникальный идентификатор
- **avatar** (строка): путь вида `img/avatar-{{i}}.svg`, где i от 1 до 6
- **message** (строка): одно или два случайных предложения
- **name** (строка): случайное имя автора

## Предлагаемые изменения

### Добавление в `Readme.md`

#### [MODIFY] [Readme.md](file:///d:/antigravity/anti-keksagram/Readme.md)

Добавим техническое задание проекта в свернутом виде (используя HTML тег `<details>`) и описание текущей задачи с планом выполнения.

---

### Подключение скрипта

#### [MODIFY] [index.html](file:///d:/antigravity/anti-keksagram/index.html)

Добавим подключение файла `js/main.js` перед закрывающим тегом `</body>`.

---

### Реализация генерации данных

#### [MODIFY] [main.js](file:///d:/antigravity/anti-keksagram/js/main.js)

Создадим следующие функции:

1. **Вспомогательные функции:**
  - `getRandomInteger(min, max)` - генерация случайного целого числа
  - `getRandomArrayElement(array)` - выбор случайного элемента массива
  - `createIdGenerator()` - фабрика для создания генераторов уникальных ID

2. **Генерация комментариев:**
  - `createComment()` - создание объекта комментария
  - `createComments()` - создание массива случайного количества комментариев

3. **Генерация фотографий:**
  - `createPhoto(index)` - создание объекта фотографии
  - `createPhotos()` - создание массива из 25 фотографий

4. **Константы:**
  - Массивы сообщений для комментариев
  - Массив имен комментаторов
  - Массив описаний фотографий

## План проверки

### Автоматизированная проверка

1. Открыть `index.html` в браузере
2. Открыть консоль разработчика (F12)
3. Проверить, что в консоли выведен массив из 25 объектов
4. Проверить структуру случайного объекта фотографии
5. Проверить уникальность ID фотографий
6. Проверить уникальность URL фотографий
7. Проверить корректность диапазонов значений (likes: 15-200, comments: 0-30)
8. Проверить структуру комментариев

### Ручная проверка

1. Визуально проверить, что каждая фотография имеет:
  - Уникальный ID
  - Корректный URL
  - Непустое описание
  - Количество лайков в диапазоне 15-200
  - От 0 до 30 комментариев

2. Проверить комментарии:
  - Уникальные ID
  - Корректные пути к аватарам (1-6)
  - Сообщения из предложенного набора (1 или 2 предложения)
  - Случайные имена

## Преимущества подхода

1. **Модульность**: каждая функция выполняет одну задачу
2. **Переиспользование**: вспомогательные функции можно использовать в будущем
3. **Читаемость**: код легко понять и поддерживать
4. **Уникальность ID**: использование генераторов гарантирует отсутствие дубликатов

---

# План реализации: Разделение кода на модули (module5-task1)

## Описание задачи

Необходимо разделить код из `main.js` на отдельные ES2015-модули для улучшения структуры проекта, повышения читаемости и поддерживаемости кода.

## Анализ текущего кода

В файле `main.js` находятся:
- Вспомогательные функции (`getRandomInteger`, `getRandomArrayElement`, `createIdGenerator`)
- Константы данных (`MESSAGES`, `NAMES`, `DESCRIPTIONS`)
- Настройки генерации (`PHOTO_COUNT`, диапазоны значений)
- Функции для создания комментариев и фотографий
- Код запуска (генерация данных и вывод в консоль)

## Предлагаемая структура модулей

### 1. util.js — Модуль вспомогательных функций

**Содержимое:**
- `getRandomInteger(min, max)` — генерация случайного целого числа
- `getRandomArrayElement(elements)` — выбор случайного элемента
- `createIdGenerator()` — фабрика генераторов уникальных ID

**Экспорт:** именованный экспорт всех функций

---

### 2. data.js — Модуль генерации данных

**Содержимое:**
- Импорт функций из `util.js`
- Константы: `MESSAGES`, `NAMES`, `DESCRIPTIONS`
- Настройки генерации
- `createComment()` — создание комментария
- `createComments()` — создание массива комментариев
- `createPhoto(index)` — создание фотографии
- `createPhotos()` — создание массива фотографий

**Экспорт:** `createPhotos` как основная функция модуля

---

### 3. main.js — Точка входа

**Содержимое:**
- Импорт `createPhotos` из `data.js`
- Генерация данных
- Вывод в консоль для проверки

---

### 4. Дополнительные модули (заготовки для будущего)

На основе технического задания создадим пустые файлы для будущих модулей:

- **form.js** — работа с формой загрузки изображения
- **scale.js** — изменение масштаба изображения
- **effect.js** — применение эффектов к изображению
- **validation.js** — валидация хэштегов и комментариев
- **upload.js** — загрузка данных на сервер
- **gallery.js** — отображение миниатюр фотографий
- **preview.js** — полноэкранный просмотр фотографии
- **filter.js** — фильтрация изображений
- **api.js** — работа с сервером

## Предлагаемые изменения

### Создание модулей

#### [NEW] [util.js](file:///d:/antigravity/anti-keksagram/js/util.js)

Создание модуля с вспомогательными функциями.

```javascript
export const getRandomInteger = (min, max) => { /* ... */ };
export const getRandomArrayElement = (elements) => { /* ... */ };
export const createIdGenerator = () => { /* ... */ };
```

---

#### [NEW] [data.js](file:///d:/antigravity/anti-keksagram/js/data.js)

Создание модуля для генерации данных.

```javascript
import { getRandomInteger, getRandomArrayElement, createIdGenerator } from './util.js';
// ... константы и функции генерации
export const createPhotos = () => { /* ... */ };
```

---

#### [MODIFY] [main.js](file:///d:/antigravity/anti-keksagram/js/main.js)

Преобразование в точку входа с импортами.

```javascript
import { createPhotos } from './data.js';

const photos = createPhotos();
console.log(photos);
```

---

#### [MODIFY] [index.html](file:///d:/antigravity/anti-keksagram/index.html)

Изменение подключения скрипта на модуль.

```html
<script src="js/main.js" type="module"></script>
```

---

#### [NEW] Заготовки модулей

Создание пустых файлов для будущих модулей с комментариями о назначении.

## План проверки

### Проверка работоспособности

1. Открыть `index.html` в браузере
2. Открыть консоль разработчика (F12)
3. Убедиться, что в консоли выводится массив из 25 фотографий
4. Проверить отсутствие ошибок в консоли

### Проверка модульной структуры

1. Убедиться, что код разделен на логические модули
2. Проверить корректность импортов/экспортов
3. Проверить, что каждый модуль имеет четкую ответственность

### Возможные проблемы и решения

**Проблема:** CORS-ошибка при локальном открытии файла
**Решение:** Использовать локальный веб-сервер (например, Live Server в VS Code)

**Проблема:** Браузер не поддерживает ES6-модули
**Решение:** Использовать современный браузер (Chrome, Firefox, Edge)

## Преимущества модульного подхода

1. **Разделение ответственности**: каждый модуль отвечает за свою задачу
2. **Переиспользование**: модули можно легко импортировать в других частях проекта
3. **Тестируемость**: модули легче тестировать изолированно
4. **Масштабируемость**: легко добавлять новые модули
5. **Читаемость**: код структурирован и понятен
6. **Инкапсуляция**: приватные функции остаются внутри модуля

---

# План реализации: Отрисовка миниатюр фотографий (module7-task1)

## Описание задачи

Необходимо создать модуль для отрисовки миниатюр фотографий других пользователей. Модуль должен использовать временные данные и шаблон `#picture` для создания DOM-элементов и отображения их в блоке `.pictures`.

## Анализ шаблона

Шаблон `#picture` в `index.html` (строки 216-224):

```html
<template id="picture">
  <a href="#" class="picture">
    <img class="picture__img" src="" width="182" height="182" alt="Случайная фотография">
    <p class="picture__info">
      <span class="picture__comments"></span>
      <span class="picture__likes"></span>
    </p>
  </a>
</template>
```

##Требования к заполнению данными

- **src** — адрес изображения из поля `url`
- **alt** — описание изображения из поля `description`
- **picture__likes** — количество лайков из поля `likes`
- **picture__comments** — количество комментариев (длина массива `comments`)

## Предлагаемая структура модуля gallery.js

### Функции модуля

1. **createPictureElement(photo)** — создание DOM-элемента миниатюры
  - Клонирует шаблон `#picture`
  - Заполняет данными из объекта photo
  - Возвращает готовый элемент

2. **renderPictures(photos, container)** — отрисовка всех миниатюр
  - Создает `DocumentFragment`
  - Создает элементы для каждой фотографии
  - Вставляет фрагмент в контейнер за одну операцию

### Экспорт

```javascript
export { renderPictures };
```

## Предлагаемые изменения

### Реализация модуля gallery.js

#### [MODIFY] [gallery.js](file:///d:/antigravity/anti-keksagram/js/gallery.js)

Заменить заготовку полноценной реализацией:

```javascript
// Получение шаблона
const pictureTemplate = document.querySelector('#picture')
  .content
  .querySelector('.picture');

// Контейнер для миниатюр
const picturesContainer = document.querySelector('.pictures');

// Создание элемента миниатюры
const createPictureElement = (photo) => {
  const pictureElement = pictureTemplate.cloneNode(true);

  const img = pictureElement.querySelector('.picture__img');
  img.src = photo.url;
  img.alt = photo.description;

  pictureElement.querySelector('.picture__likes').textContent = photo.likes;
  pictureElement.querySelector('.picture__comments').textContent = photo.comments.length;

  return pictureElement;
};

// Отрисовка миниатюр
const renderPictures = (photos) => {
  const fragment = document.createDocumentFragment();

  photos.forEach((photo) => {
    fragment.appendChild(createPictureElement(photo));
  });

  picturesContainer.appendChild(fragment);
};

export { renderPictures };
```

---

### Обновление main.js

#### [MODIFY] [main.js](file:///d:/antigravity/anti-keksagram/js/main.js)

Импортировать и вызвать функцию отрисовки:

```javascript
import { createPhotos } from './data.js';
import { renderPictures } from './gallery.js';

const photos = createPhotos();
renderPictures(photos);
```

Примечание: вывод в консоль `console.log(photos)` можно удалить или закомментировать.

---

### Обновление Readme.md

#### [MODIFY] [Readme.md](file:///d:/antigravity/anti-keksagram/Readme.md)

Добавить описание выполненной задачи в свернутом блоке.

## План проверки

### Проверка в браузере

1. Открыть `index.html` в браузере через локальный сервер
2. Убедиться, что на странице отображаются миниатюры фотографий
3. Проверить, что отображается ровно 25 миниатюр

### Проверка данных

1. Проверить, что изображения имеют корректные адреса (`photos/1.jpg` ... `photos/25.jpg`)
2. Проверить, что у каждой миниатюры есть описание в атрибуте `alt`
3. Проверить, что отображается количество лайков (15-200)
4. Проверить, что отображается количество комментариев (0-30)

### Проверка кода

1. Убедиться, что используется `DocumentFragment` для вставки элементов
2. Убедиться, что шаблон клонируется правильно
3. Проверить отсутствие ошибок в консоли

### Возможные проблемы

**Проблема:** Миниатюры не отображаются
**Причина:** Блок `.pictures` скрыт или не существует
**Решение:** Проверить наличие элемента в DOM и его CSS

**Проблема:** Изображения не загружаются
**Причина:** Неправильные пути к изображениям
**Решение:** Убедиться, что папка `photos` существует с файлами 1.jpg-25.jpg

## Преимущества реализации

1. **Производительность**: использование `DocumentFragment` минимизирует reflow
2. **Модульность**: отрисовка отделена от генерации данных
3. **Переиспользование**: функции можно использовать для обновления галереи
4. **Читаемость**: код структурирован и понятен
